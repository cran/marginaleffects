---
title: "Supported Models"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Supported Models}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# Adjusted predictions and marginal means

Under the hood, `marginaleffects`'s `predictions` and `marginalmeans` functions use the `insight` package to retrieve adjusted predictions from a wide variety of models. Currently, `insight` [supports very many model types](https://easystats.github.io/insight/#list-of-supported-models-by-class), and most should work out-of-the-box with the `predictions` function. If you run into problems, do not hesitate to [report them on Github or via email.](https://github.com/vincentarelbundock/marginaleffects/issues)

# Marginal effects and contrasts

This table shows the list of model types for which the `marginaleffects` function can compute slopes and contrasts. There are three main alternative software packages to compute such slopes (1) `Stata`'s `margins` command, (2) `R`'s `margins::margins`  function, and (3) `R`'s `emmeans::emtrends` function. The [test suite hosted on Github](https://github.com/vincentarelbundock/marginaleffects/tree/main/tests/testthat) compares the numerical equivalence of results produced by `marginaleffects` to those produced by all 3 alternative software packages:

* ✓: a green check means that the results of at least one model are equal to a reasonable tolerance.
* ✖: a red cross means that the results are *not* identical; extra caution is warranted.
* U: a grey U means that computing slopes for a model type is *unsupported* by alternative packages, but supported by `marginaleffects`.
* An empty cell means means that no comparison has been made yet.

I am *very* eager to add support for new models. Feel free to file a request or submit code on Github.

```{r, echo = FALSE, message = FALSE, warning = FALSE}
library("data.table")
library("kableExtra")

dat <- "https://raw.githubusercontent.com/vincentarelbundock/marginaleffects/main/data-raw/supported_models.csv"
#dat <- "data-raw/supported_models.csv"
supported_models <- fread(dat, colClasses = rep("character", 10))

tmp <- supported_models
for (i in nrow(tmp):2) {
    if (tmp$Package[i] == tmp$Package[i - 1]) {
        tmp$Package[i] <- ""
    }
}

colnames(tmp) <- c("Package",
                   "Function",
                   "dY/dX",
                   "SE",
                   "dY/dX ",
                   "SE ",
                   "dY/dX  ",
                   "SE  ",
                   "dY/dX   ",
                   "SE   ")

# remove "supported" columns which feel useless since everything is supported
tmp[[3]] <- tmp[[4]] <- NULL

# colors & icons
f <- function(x) fcase(x == TRUE, "green", x == FALSE, "red", default = "grey")
idx <- lapply(tmp, f)

for (i in 3:ncol(tmp)) {
    tmp[[i]] <- as.character(tmp[[i]])
    tmp[[i]] <- fcase(tmp[[i]] == "TRUE", "✓",
                      tmp[[i]] == "FALSE", "✖",
                      tmp[[i]] == "U", "U",
                      default = "")
}


# kableExtra
tab <- kbl(tmp, align = c("l", "l", rep("c", 6)), full_width = FALSE)
tab <- kable_styling(tab)
for (i in 3:ncol(tmp)) {
    tab <- column_spec(tab, column = i, color = idx[[i]])
}
tab <- add_header_above(tab, c("Supported by marginaleffects" = 2, "Stata" = 2, "margins" = 2, "emtrends" = 2))
tab <- add_header_above(tab, c(" " = 2, "Numerical equivalence" = 6))
tab
```
